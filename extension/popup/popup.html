<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400">
  <title>XActions</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- ============================================ -->
  <!-- HEADER -->
  <!-- ============================================ -->
  <header id="header">
    <div class="header-left">
      <div class="logo">X<span class="accent">A</span></div>
      <div class="header-title">XActions</div>
    </div>
    <div class="header-right">
      <div id="connectionStatus" class="status-dot disconnected" title="Not connected to X"></div>
      <button id="btnEmergencyStop" class="btn-emergency" title="Emergency Stop All">‚èπ</button>
    </div>
  </header>

  <!-- ============================================ -->
  <!-- DISCONNECTED BANNER -->
  <!-- ============================================ -->
  <div id="disconnectedBanner" class="disconnected-banner hidden">
    <div class="disconnected-content">
      <span class="disconnected-icon">üîó</span>
      <div>
        <div class="disconnected-title">Not connected to X</div>
        <div class="disconnected-desc">Open <a href="https://x.com" target="_blank">x.com</a> in a tab to start using automations</div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- ============================================ -->
  <!-- ACCOUNT INFO -->
  <!-- ============================================ -->
  <section id="accountInfo" class="section">
    <div class="account-card">
      <div class="account-avatar" id="accountAvatar">?</div>
      <div class="account-details">
        <div class="account-name" id="accountName">Connect to X</div>
        <div class="account-handle" id="accountHandle">Open x.com to get started</div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- TAB NAVIGATION -->
  <!-- ============================================ -->
  <nav class="tabs">
    <button class="tab active" data-tab="automations">Automations</button>
    <button class="tab" data-tab="activity">Activity</button>
    <button class="tab" data-tab="settings">Settings</button>
  </nav>

  <!-- ============================================ -->
  <!-- AUTOMATIONS TAB -->
  <!-- ============================================ -->
  <section id="tab-automations" class="tab-content active">

    <!-- Dashboard Summary -->
    <div class="dashboard-summary" id="dashboardSummary">
      <div class="dash-stat">
        <div class="dash-value" id="dashRunning">0</div>
        <div class="dash-label">Running</div>
      </div>
      <div class="dash-stat">
        <div class="dash-value" id="dashTodayActions">0</div>
        <div class="dash-label">Today</div>
      </div>
      <div class="dash-stat">
        <div class="dash-value" id="dashTotalActions">0</div>
        <div class="dash-label">Total</div>
      </div>
      <div class="dash-stat">
        <div class="dash-value" id="dashSessionTime">‚Äî</div>
        <div class="dash-label">Uptime</div>
      </div>
    </div>

    <!-- Category Filters -->
    <div class="category-filters">
      <button class="cat-filter active" data-category="all">All</button>
      <button class="cat-filter" data-category="growth">Growth</button>
      <button class="cat-filter" data-category="tools">Tools</button>
      <button class="cat-filter" data-category="analytics">Analytics</button>
    </div>

    <!-- Search -->
    <div class="search-bar">
      <input type="text" id="automationSearch" placeholder="Search automations..." class="search-input">
    </div>
    <!-- Auto-Liker -->
    <div class="automation-card" data-automation="autoLiker" data-category="growth" data-searchable="auto liker like tweets keywords feed">
      <div class="card-header">
        <div class="card-icon">‚ù§Ô∏è</div>
        <div class="card-info">
          <div class="card-title">Auto-Liker</div>
          <div class="card-desc">Like tweets matching keywords in your feed</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Keywords <small>(comma-separated, empty = all)</small>
          <input type="text" data-setting="keywords" placeholder="web3, crypto, AI">
        </label>
        <label>Max likes per session
          <input type="number" data-setting="maxActions" value="20" min="1" max="200">
        </label>
        <div class="speed-preset-row">
          <span class="speed-label">Speed</span>
          <div class="speed-presets">
            <button class="speed-btn" data-speed="safe" data-min="3000" data-max="6000">Safe</button>
            <button class="speed-btn active" data-speed="normal" data-min="2000" data-max="5000">Normal</button>
            <button class="speed-btn" data-speed="fast" data-min="1000" data-max="2500">Fast</button>
          </div>
        </div>
        <label>Delay between actions <small class="delay-display">2s ‚Äî 5s</small>
          <input type="range" data-setting="minDelay" min="500" max="10000" step="500" value="2000" class="delay-slider">
        </label>
      </div>
    </div>

    <!-- Smart Unfollow -->
    <div class="automation-card" data-automation="smartUnfollow" data-category="growth" data-searchable="smart unfollow non-followers following cleanup">
      <div class="card-header">
        <div class="card-icon">üëã</div>
        <div class="card-info">
          <div class="card-title">Smart Unfollow</div>
          <div class="card-desc">Unfollow users who don't follow back</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Days to wait before unfollow
          <input type="number" data-setting="daysToWait" value="3" min="1" max="30">
        </label>
        <label>Max unfollows per session
          <input type="number" data-setting="maxActions" value="50" min="1" max="200">
        </label>
        <label>Whitelist <small>(comma-separated usernames)</small>
          <input type="text" data-setting="whitelist" placeholder="user1, user2">
        </label>
        <div class="speed-preset-row">
          <span class="speed-label">Speed</span>
          <div class="speed-presets">
            <button class="speed-btn" data-speed="safe" data-min="3000" data-max="6000">Safe</button>
            <button class="speed-btn active" data-speed="normal" data-min="2000" data-max="5000">Normal</button>
            <button class="speed-btn" data-speed="fast" data-min="1000" data-max="2500">Fast</button>
          </div>
        </div>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="dryRun"> Dry run (preview only)
        </label>
      </div>
    </div>

    <!-- Keyword Follow -->
    <div class="automation-card" data-automation="keywordFollow" data-category="growth" data-searchable="keyword follow search users discover">
      <div class="card-header">
        <div class="card-icon">üîç</div>
        <div class="card-info">
          <div class="card-title">Keyword Follow</div>
          <div class="card-desc">Search keywords and follow matching users</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Keywords <small>(comma-separated)</small>
          <input type="text" data-setting="keywords" placeholder="web3 developer, solidity">
        </label>
        <label>Max follows per keyword
          <input type="number" data-setting="maxPerKeyword" value="10" min="1" max="50">
        </label>
        <label>Max follows total
          <input type="number" data-setting="maxActions" value="30" min="1" max="100">
        </label>
        <label>Min followers on user
          <input type="number" data-setting="minFollowers" value="100" min="0" max="1000000">
        </label>
        <div class="speed-preset-row">
          <span class="speed-label">Speed</span>
          <div class="speed-presets">
            <button class="speed-btn active" data-speed="safe" data-min="3000" data-max="6000">Safe</button>
            <button class="speed-btn" data-speed="normal" data-min="2000" data-max="5000">Normal</button>
            <button class="speed-btn" data-speed="fast" data-min="1000" data-max="2500">Fast</button>
          </div>
        </div>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="mustHaveBio"> Must have bio
        </label>
      </div>
    </div>

    <!-- Growth Suite -->
    <div class="automation-card" data-automation="growthSuite" data-category="growth" data-searchable="growth suite all-in-one like follow unfollow">
      <div class="card-header">
        <div class="card-icon">üöÄ</div>
        <div class="card-info">
          <div class="card-title">Growth Suite</div>
          <div class="card-desc">All-in-one: like, follow, unfollow non-followers</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Keywords <small>(comma-separated)</small>
          <input type="text" data-setting="keywords" placeholder="web3, crypto, AI">
        </label>
        <label>Session duration (minutes)
          <input type="number" data-setting="sessionMinutes" value="30" min="5" max="120">
        </label>
        <label>Max likes
          <input type="number" data-setting="maxLikes" value="30" min="0" max="200">
        </label>
        <label>Max follows
          <input type="number" data-setting="maxFollows" value="20" min="0" max="100">
        </label>
        <label>Max unfollows
          <input type="number" data-setting="maxUnfollows" value="15" min="0" max="100">
        </label>
        <div class="speed-preset-row">
          <span class="speed-label">Speed</span>
          <div class="speed-presets">
            <button class="speed-btn active" data-speed="safe" data-min="3000" data-max="6000">Safe</button>
            <button class="speed-btn" data-speed="normal" data-min="2000" data-max="5000">Normal</button>
            <button class="speed-btn" data-speed="fast" data-min="1000" data-max="2500">Fast</button>
          </div>
        </div>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="enableFollow" checked> Enable follow
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="enableLike" checked> Enable like
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="enableUnfollow" checked> Enable unfollow
        </label>
      </div>
    </div>

    <!-- Auto-Commenter -->
    <div class="automation-card" data-automation="autoCommenter" data-category="growth" data-searchable="auto commenter reply comments posts">
      <div class="card-header">
        <div class="card-icon">üí¨</div>
        <div class="card-info">
          <div class="card-title">Auto-Commenter</div>
          <div class="card-desc">Auto-reply to new posts with random comments</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Comments <small>(comma-separated)</small>
          <input type="text" data-setting="comments" placeholder="üî•, Great point!, Interesting!">
        </label>
        <label>Keywords filter <small>(empty = all posts)</small>
          <input type="text" data-setting="keywords" placeholder="web3, crypto">
        </label>
        <label>Check interval (seconds)
          <input type="number" data-setting="checkInterval" value="60" min="10" max="600">
        </label>
        <label>Max comments per session
          <input type="number" data-setting="maxActions" value="5" min="1" max="50">
        </label>
      </div>
    </div>

    <!-- Follow Engagers -->
    <div class="automation-card" data-automation="followEngagers" data-category="growth" data-searchable="follow engagers likers retweeters tweet">
      <div class="card-header">
        <div class="card-icon">üë•</div>
        <div class="card-info">
          <div class="card-title">Follow Engagers</div>
          <div class="card-desc">Follow users who liked/retweeted a tweet</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Stopped</span>
        </div>
      </div>
      <div class="card-progress hidden"><div class="progress-bar"></div><span class="progress-text"></span></div>
      <div class="card-actions">
        <span class="action-count">0 actions</span>
        <span class="session-timer hidden"></span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Start">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Mode
          <select data-setting="mode">
            <option value="likers">Likers</option>
            <option value="retweeters">Retweeters</option>
          </select>
        </label>
        <label>Max follows
          <input type="number" data-setting="maxActions" value="30" min="1" max="100">
        </label>
        <label>Min followers on user
          <input type="number" data-setting="minFollowers" value="50" min="0" max="1000000">
        </label>
        <div class="speed-preset-row">
          <span class="speed-label">Speed</span>
          <div class="speed-presets">
            <button class="speed-btn active" data-speed="safe" data-min="3000" data-max="6000">Safe</button>
            <button class="speed-btn" data-speed="normal" data-min="2000" data-max="5000">Normal</button>
            <button class="speed-btn" data-speed="fast" data-min="1000" data-max="2500">Fast</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Video Downloader -->
    <div class="automation-card" data-automation="videoDownloader" data-category="tools" data-searchable="video downloader download mp4 save media">
      <div class="card-header">
        <div class="card-icon">üé¨</div>
        <div class="card-info">
          <div class="card-title">Video Downloader</div>
          <div class="card-desc">Adds download button to tweets with video</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Off</span>
        </div>
      </div>
      <div class="card-actions">
        <span class="action-count">0 downloads</span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Enable">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Quality preference
          <select data-setting="quality">
            <option value="highest">Highest available</option>
            <option value="720p">720p</option>
            <option value="480p">480p</option>
          </select>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="autoDownload"> Auto-download on click
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="showButton" checked> Show download button on tweets
        </label>
      </div>
    </div>

    <!-- Who Unfollowed Me -->
    <div class="automation-card" data-automation="unfollowerDetector" data-category="analytics" data-searchable="unfollowed me detector unfollowers tracking">
      <div class="card-header">
        <div class="card-icon">üîî</div>
        <div class="card-info">
          <div class="card-title">Who Unfollowed Me</div>
          <div class="card-desc">Detect and track recent unfollowers</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Off</span>
        </div>
      </div>
      <div class="card-actions">
        <span class="action-count">0 detected</span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Scan">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Check frequency (hours)
          <input type="number" data-setting="checkFrequency" value="24" min="1" max="168">
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="notifications" checked> Show notifications
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="keepHistory" checked> Keep unfollower history
        </label>
        <div id="unfollowerList" class="mini-list"></div>
      </div>
    </div>

    <!-- Best Time to Post -->
    <div class="automation-card" data-automation="bestTimeToPost" data-category="analytics" data-searchable="best time post engagement schedule analyze">
      <div class="card-header">
        <div class="card-icon">üìä</div>
        <div class="card-info">
          <div class="card-title">Best Time to Post</div>
          <div class="card-desc">Analyze engagement patterns by time of day</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Idle</span>
        </div>
      </div>
      <div class="card-actions">
        <span class="action-count">No data yet</span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Analyze">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label>Tweets to analyze
          <input type="number" data-setting="tweetCount" value="50" min="10" max="200">
        </label>
        <label>Timezone
          <select data-setting="timezone">
            <option value="local">Local time</option>
            <option value="UTC">UTC</option>
          </select>
        </label>
        <div id="heatmapContainer" class="heatmap-container"></div>
      </div>
    </div>

    <!-- Thread Reader -->
    <div class="automation-card" data-automation="threadReader" data-category="tools" data-searchable="thread reader unroll threads readable view">
      <div class="card-header">
        <div class="card-icon">üßµ</div>
        <div class="card-info">
          <div class="card-title">Thread Reader</div>
          <div class="card-desc">Unroll threads into clean readable view</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Off</span>
        </div>
      </div>
      <div class="card-actions">
        <span class="action-count">0 unrolled</span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Enable">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label class="checkbox-label">
          <input type="checkbox" data-setting="showUnrollBtn" checked> Show "Unroll" button on threads
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="autoDetect" checked> Auto-detect threads
        </label>
        <label>Max tweets to unroll
          <input type="number" data-setting="maxTweets" value="50" min="5" max="200">
        </label>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="automation-card" data-automation="quickStats" data-category="analytics" data-searchable="quick stats engagement rate profile analytics">
      <div class="card-header">
        <div class="card-icon">‚ö°</div>
        <div class="card-info">
          <div class="card-title">Quick Stats</div>
          <div class="card-desc">Engagement rate overlay on your profile</div>
        </div>
        <div class="card-status">
          <span class="status-badge stopped">Off</span>
        </div>
      </div>
      <div class="card-actions">
        <span class="action-count">‚Äî</span>
        <button class="btn-settings" title="Settings">‚öôÔ∏è</button>
        <button class="btn-toggle" title="Enable">‚ñ∂Ô∏è</button>
      </div>
      <div class="card-settings hidden">
        <label class="checkbox-label">
          <input type="checkbox" data-setting="showOverlay" checked> Show stats overlay on profile
        </label>
        <label class="checkbox-label">
          <input type="checkbox" data-setting="trackDaily" checked> Track daily stats
        </label>
        <label>Tweets to sample
          <input type="number" data-setting="sampleSize" value="20" min="5" max="100">
        </label>
        <div id="quickStatsDisplay" class="stats-display"></div>
      </div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- ACTIVITY TAB -->
  <!-- ============================================ -->
  <section id="tab-activity" class="tab-content">
    <div class="activity-header">
      <span>Live Activity Log</span>
      <div class="activity-controls">
        <select id="logFilter" class="log-filter-select">
          <option value="all">All</option>
          <option value="autoLiker">‚ù§Ô∏è Liker</option>
          <option value="smartUnfollow">üëã Unfollow</option>
          <option value="keywordFollow">üîç Follow</option>
          <option value="growthSuite">üöÄ Growth</option>
          <option value="autoCommenter">üí¨ Commenter</option>
          <option value="followEngagers">üë• Engagers</option>
          <option value="videoDownloader">üé¨ Video</option>
          <option value="unfollowerDetector">üîî Unfollower</option>
          <option value="bestTimeToPost">üìä Best Time</option>
          <option value="threadReader">üßµ Thread</option>
          <option value="quickStats">‚ö° Stats</option>
        </select>
        <button id="btnClearLog" class="btn-small">Clear</button>
      </div>
    </div>
    <div id="activityLog" class="activity-log">
      <div class="log-empty">No activity yet. Start an automation to see logs here.</div>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- SETTINGS TAB -->
  <!-- ============================================ -->
  <section id="tab-settings" class="tab-content">
    <div class="settings-section">
      <h3>Global Settings</h3>
      <label>Default min delay (ms)
        <input type="number" id="globalMinDelay" value="2000" min="500" max="30000">
      </label>
      <label>Default max delay (ms)
        <input type="number" id="globalMaxDelay" value="5000" min="1000" max="60000">
      </label>
      <label class="checkbox-label">
        <input type="checkbox" id="globalDebug" checked> Debug logging
      </label>
    </div>
    <div class="settings-section">
      <h3>Data</h3>
      <button id="btnExportSettings" class="btn-secondary">Export settings</button>
      <button id="btnImportSettings" class="btn-secondary">Import settings</button>
      <input type="file" id="importFileInput" accept=".json" style="display:none">
      <button id="btnResetAll" class="btn-danger">Reset all data</button>
    </div>
    <div class="settings-footer">
      <a href="https://github.com/nirholas/XActions" target="_blank">XActions on GitHub</a>
      <span>v1.0.0 ‚Äî by nichxbt</span>
    </div>
  </section>

  <!-- ============================================ -->
  <!-- RATE LIMIT WARNING -->
  <!-- ============================================ -->
  <div id="rateLimitWarning" class="rate-limit-banner hidden">
    <span class="rate-limit-icon">‚ö†Ô∏è</span>
    <span class="rate-limit-text">Rate limit detected ‚Äî automations paused</span>
    <button id="btnDismissRateLimit" class="btn-small">Dismiss</button>
  </div>

  <!-- ============================================ -->
  <!-- ONBOARDING MODAL -->
  <!-- ============================================ -->
  <div id="onboardingModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="onboarding-header">
        <div class="logo-large">X<span class="accent">A</span></div>
        <h2>Welcome to XActions</h2>
        <p class="onboarding-subtitle">X/Twitter automation without the hassle. No API fees.</p>
      </div>
      <div class="onboarding-features">
        <div class="onboarding-feature">
          <span>‚ù§Ô∏è</span>
          <div><strong>Auto-Liker</strong><br><small>Like tweets matching your keywords</small></div>
        </div>
        <div class="onboarding-feature">
          <span>üëã</span>
          <div><strong>Smart Unfollow</strong><br><small>Remove non-followers automatically</small></div>
        </div>
        <div class="onboarding-feature">
          <span>üé¨</span>
          <div><strong>Video Downloader</strong><br><small>Download videos from any tweet</small></div>
        </div>
        <div class="onboarding-feature">
          <span>üßµ</span>
          <div><strong>Thread Reader</strong><br><small>Unroll threads into readable view</small></div>
        </div>
      </div>
      <div class="onboarding-actions">
        <button id="btnOnboardingStart" class="btn-primary">Get Started</button>
        <label class="checkbox-label onboarding-enable">
          <input type="checkbox" id="onboardingEnablePopular" checked> Enable popular features
        </label>
      </div>
      <div class="onboarding-footer">
        <small>Open <strong>x.com</strong> to start using automations. By nichxbt.</small>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
